<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <h1>Histogram</h1>
    <form method = "post" enctype="multipart/form-data">
        <label for="points">Points A+ (between 0 and 100):</label>
        <input type="range" id="A+" name="points" min="0" max="100">
        <br>
        <label for="points">Points A (between 0 and 100):</label>
        <input type="range" id="A" name="points" min="0" max="100">
        <br>
        <label for="points">Points A- (between 0 and 100):</label>
        <input type="range" id="A-" name="points" min="0" max="100">
        <br>
        <label for="points">Points B+ (between 0 and 100):</label>
        <input type="range" id="B+" name="points" min="0" max="100">
        <br>
        <label for="points">Points B (between 0 and 100):</label>
        <input type="range" id="B" name="points" min="0" max="100">
        <br>
        <label for="points">Points B- (between 0 and 100):</label>
        <input type="range" id="B-" name="points" min="0" max="100">
        <br>
        <label for="points">Points C+ (between 0 and 100):</label>
        <input type="range" id="C+" name="points" min="0" max="100">
        <br>
        <label for="points">Points C (between 0 and 100):</label>
        <input type="range" id="C" name="points" min="0" max="100">
        <br>
        <label for="points">Points C- (between 0 and 100):</label>
        <input type="range" id="C-" name="points" min="0" max="100">
        <br>
        <label for="points">Points D (between 0 and 100):</label>
        <input type="range" id="D" name="points" min="0" max="100">
        <br>
        <label for="points">Points F (between 0 and 100):</label>
        <input type="range" id="F" name="points" min="0" max="100">
        <br><br>

        <input type="submit" formaction="/handleFile" value="submit" >
        <input type="submit" formaction="/handleLogout" value="logout">

        <br><br>
        <div id = "fdata"><%= data %></div>

    <script>
        var fdata = document.getElementById('fdata');
        var fdatahtml = fdata.innerHTML;
        //fdata is string
        console.log(fdata.innerHTML);
        fdata.innerHTML = 'DATA TABLE<br>';
        var lines = fdatahtml.trim();
        lines = lines.split('\n');
        console.log('lines: ', lines);

        var tableData = '<table>';
        
            for(var row = 0; row < lines.length; row++){
                tableData += '<tr>';
                
                    // for each string row as elements of the array, parse them
                var colData = lines[row].split(',');
                console.log(`column data at ${row}: `, colData);
                
                for (var col = 0; col < colData.length; col++){
                    if(row === 0 ){
                        tableData += '<th>' + colData[col] + '</th>';
                    }else{
                        tableData += '<td>' + colData[col] + '</td>';
                    }
                }
                tableData += '</tr>';
            }
            tableData += '</table>';

        // console.log(tableData);
        fdata.innerHTML += tableData;









    </script>
</body>
</html>